[参考](https://nightlies.apache.org/flink/flink-docs-release-1.13/docs/concepts/stateful-stream-processing/)

# 什么是状态？

案例：

1. 查找某类event，状态记录event的顺序
2. 周期聚合event, 状态记录中间结果
3. 在数据流上训练及系学习模型，状态记录当前版本模型的参数
4. 管理历史数据，状态允许高效获取历史events

Flink needs to be aware of the state in order to make it fault tolerant using [checkpoints](https://nightlies.apache.org/flink/flink-docs-release-1.13/docs/dev/datastream/fault-tolerance/checkpointing/) and [savepoints](https://nightlies.apache.org/flink/flink-docs-release-1.13/docs/ops/state/savepoints/).

## Keyed State

Keyed state存储在可以被理解为内嵌的k/v存储里。状态和当前Operator读取的流一起分区存储，因此只可能在keyed流获取状态。

![State and Partitioning](https://piggo-picture.oss-cn-hangzhou.aliyuncs.com/image/state_partitioning.svg)

