标签传播算法（Label Propagation Algorithm，LPA）是一种基于图的半监督学习方法，主要用于社区发现。

LPA算法思路简单清晰，其基本过程如下：

1. 初始化。为每个顶点随机的指定一个自己特有的标签，在Spark文档中，指明用顶点的Id作为初始标签；
2. 更新所有顶点的标签。在每一次迭代中，每个顶点将自己的标签发送给它所有邻居，每个顶点根据收到的邻居消息进行标签更新，直到所有顶点的标签不再发生变化为止。对于每一轮迭代，节点标签的更新规则如下：对于某一个顶点，考察其所有邻居顶点的标签，并进行统计，将出现个数最多的那个标签赋值给当前顶点。当个数最多的标签不唯一时，随机选择一个标签赋值给当前顶点。

由上述步骤可知，LPA算法中比较关键的部分为标签的更新过程，而且LPA并不关心边的方向，把图当成无向图。算法的每个迭代过程中顶点的标签更新是基于它的邻接顶点的标签。顶点x在选择标签时，如果存在多组个数最多的标签，则随机选择其中一组标签进行更新。

然而，LPA常常不是收敛的，算法会在一直循环下去，对于这种情况，GraphX仅仅提供了一个静态方法，即指定迭代次数，并没有提供一个带公差终止条件的动态方法。

org.apache.spark.graphx.lib.LabelPropagation的run()方法，把图对象作为第一个参数，第二个参数为最大的迭代次数。